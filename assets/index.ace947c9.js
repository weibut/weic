var a=Object.defineProperty,s=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,t=(s,e,l)=>e in s?a(s,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[e]=l;import{f as i,c as n,o as c,x as r,k as o,l as d,u as p,a as m,d as f,t as u,j as y,F as w,q as b,bA as h,s as _,b as v,g as x,bB as g,bC as O,V as j,n as k,aE as q,aF as D,E as I,b8 as T}from"./vendor.d7d62f29.js";import{A as C,B as V,C as z,D as E,b as F}from"./main.0c516264.js";import{_ as H}from"./d-dialog.742c36de.js";import{a as P}from"./timeFormat.e3a60483.js";import{r as $}from"./d-text-icon.995c3277.js";const A={class:"app-weather-body d-scrollbar-hide"},B={class:"d-flex-between"},M={class:"f12"},W={class:"ml5"},S={class:"ml5"},U={class:"f12 ml20"},G={class:"d-flex-y app-weather-select"},J={class:"d-flex-y mt20 mb20"},K={class:"weather-now-tmp"},L={class:"ml20"},N={key:0,class:"weather-aqi"},Q={class:"mt10 d-flex-y"},R={class:"mr10"},X={class:"mr10"},Y={class:"mr10"},Z={key:0,class:"f14"},aa={class:"mt10 mb10 f14 d-flex"},sa={class:"mr20"},ea={class:"mr20"},la={class:"mr20"},ta={class:"mr20"},ia={class:"mr20 d-flex-x"},na={class:"mr20 d-flex-x"},ca={class:"weather-card-bg"},ra=f("h3",{class:"weather-card-title"},"24H天气预报",-1),oa={class:"f14 d-auto-x",style:{display:"flex"}},da={class:"mb10 f12"},pa={class:"mb10 d-flex-center"},ma={class:"weather-card-bg"},fa=f("h3",{class:"weather-card-title"},"7日天气预报",-1),ua={class:"mt5 weather-daily_grid f14"},ya={class:"mb10"},wa={class:"mb10"},ba={class:"mb10 d-flex-center"},ha={class:"mb10"},_a={class:"mb10"},va={class:"weather-card-bg"},xa=f("h3",{class:"weather-card-title"},"生活指数",-1),ga={class:"weather-lifestyle f12"},Oa=f("div",{class:"mt10 f12 ac"},"天气数据由和风天气提供",-1),ja={name:"appWeather",title:"i天气",icon:"weather-icon",description:"准确预报全球近10000多个地区的一周天气预报，包括国内县级和县级以上全部城市"},ka=Object.assign(ja,{setup(a){const ja=$(),ka=i({cityId:"",cityOptions:[],loading:!1,searchWeather:null,updateTime:""}),qa={cw:"洗车指数",drsg:"穿衣指数",uv:"紫外线指数",fsh:"钓鱼指数",comf:"舒适度指数",sport:"运动指数",flu:"感冒指数",trav:"旅游指数"},Da=n((()=>(ja.value.lifestyle||[]).map((a=>({name:qa[a.type],value:a.brf}))))),Ia=n((()=>({backgroundImage:C(ja.value.now.cond_code)})));function Ta(a){ka.cityOptions=[],a.length<2||z({location:a}).then((a=>{let i=a.location||[];i=i.map((a=>((a,i)=>{for(var n in i||(i={}))e.call(i,n)&&t(a,n,i[n]);if(s)for(var n of s(i))l.call(i,n)&&t(a,n,i[n]);return a})({label:a.name+"-"+a.adm2},a))),ka.cityOptions=i}))}async function Ca(){ka.loading=!0,await E(null),await V(!0),ka.cityId="",setTimeout((()=>{ka.loading=!1}),300)}async function Va(a){if(ka.loading=!0,!a)return;let s=ka.cityOptions.find((s=>s.id==a));await E(s),await V(!0),setTimeout((()=>{ka.loading=!1}),200)}function za(a){let s=["周日","周一","周二","周三","周四","周五","周六"][j(a).day()];return j(a).format("DD")==j().format("DD")&&(s="今天"),s}return V(),(a,s)=>{const e=q,l=D,t=I,i=F,n=H,C=T;return c(),r(n,{width:"770px",height:"500px"},{default:o((()=>[d((c(),m("div",{class:"app-weather",style:k(p(Ia))},[f("div",A,[f("div",B,[f("div",M,[f("span",null,u(p(ja).location.adm2)+",",1),f("span",null,u(p(ja).location.name),1),f("span",W,u(p(ja).now.cond_txt),1),f("span",S,u(p(ja).daily_forecast[0].tmp_min)+"°~"+u(p(ja).daily_forecast[0].tmp_max)+"° ",1),f("span",U,"发布于:"+u(p(P)(p(ja).updateTime)),1)]),f("div",G,[y(l,{"popper-append-to-body":!1,modelValue:p(ka).cityId,"onUpdate:modelValue":s[0]||(s[0]=a=>p(ka).cityId=a),"remote-method":Ta,filterable:"",remote:"","popper-class":"app-weather-popper",placeholder:"输入城市、乡镇",onChange:Va,size:"mini"},{default:o((()=>[(c(!0),m(w,null,b(p(ka).cityOptions,(a=>(c(),r(e,{key:a.value,label:a.label,value:a.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),y(t,{title:"自动定位",class:"location-btn",onClick:Ca},{default:o((()=>[y(p(h))])),_:1})])]),f("div",J,[f("span",K,u(p(ja).now.tmp)+"°",1),f("div",L,[p(ja).air_now_city?(c(),m("p",N,[y(i,{size:"15",icon:"icon-air"}),_(" "+u(p(ja).air_now_city.qlty)+"/"+u(p(ja).air_now_city.aqi),1)])):v("",!0),f("p",Q,[f("i",{class:x(["f15 mr5",`qi-${p(ja).now.cond_code}-fill`])},null,2),f("span",R,u(p(ja).now.cond_txt),1),f("span",X,u(p(ja).now.wind_dir),1),f("span",Y,u(p(ja).now.wind_sc)+"级",1)])])]),p(ja).rain?(c(),m("div",Z,"预计"+u(p(ja).rain.txt),1)):v("",!0),f("div",aa,[f("span",sa,"降水"+u(p(ja).now.pcpn)+"mm",1),f("span",ea,"湿度"+u(p(ja).now.hum)+"%",1),f("span",la,"气压"+u(p(ja).now.pres)+"百帕",1),f("span",ta,"湿度"+u(p(ja).now.hum)+"%",1),f("span",ia,[y(t,{class:"mr5",title:"日出"},{default:o((()=>[y(p(g))])),_:1}),_(" "+u(p(ja).sun.rise),1)]),f("span",na,[y(t,{class:"mr5",title:"日落"},{default:o((()=>[y(p(O))])),_:1}),_(" "+u(p(ja).sun.set),1)])]),f("div",ca,[ra,f("ul",oa,[(c(!0),m(w,null,b(p(ja).hourly||[],((a,s)=>(c(),m("li",{class:"weather-daily_item ac pb20",key:s,style:{"min-width":"50px"}},[f("p",da,u(p(P)(a.fxTime,"HH时")),1),f("p",pa,[f("i",{class:x(["f16",`qi-${a.icon}-fill`])},null,2)]),f("p",null,u(a.temp)+"°",1)])))),128))])]),f("div",ma,[fa,f("ul",ua,[(c(!0),m(w,null,b(p(ja).daily_forecast,((a,s)=>{return c(),m("li",{class:"weather-daily_item ac",key:s},[f("p",ya,u(za(a.date)),1),f("p",wa,u((e=a.date,j(e).format("MM-DD"))),1),f("p",ba,[f("i",{class:x(["f16 mr5",`qi-${a.cond_code_d}-fill`])},null,2),_(" "+u(a.cond_txt_d),1)]),f("p",ha,u(a.tmp_min)+"°~"+u(a.tmp_max)+"°",1),f("p",_a,[y(i,{size:"14",icon:"icon-fengxiang"}),_(" "+u(a.wind_sc)+"级 ",1)])]);var e})),128))])]),f("div",va,[xa,f("ul",ga,[(c(!0),m(w,null,b(p(Da),((a,s)=>(c(),m("li",{class:"d-flex-center",key:s},[f("div",null,[f("p",null,u(a.name),1),f("p",null,u(a.value),1)])])))),128))])]),Oa])],4)),[[C,p(ka).loading]])])),_:1})}}});export{ka as default};
