var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,i=(l,a,o)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[a]=o;import{_ as n}from"./d-dialog.742c36de.js";import{f as r,r as c,c as d,b9 as u,aP as m,o as p,x as b,k as h,d as f,l as k,a as y,j as v,u as g,F as x,q as C,t as w,J as V,g as j,b as _,m as I,P as O,ac as z,aa as D,ad as P,ba as U,L as K,M as A,N as B,R as E,aE as M,aF as F,b5 as T,aY as $,s as q}from"./vendor.d7d62f29.js";import"./el-card.c716b62c.js";import{_ as J,b as L,f as N}from"./d-text-icon.995c3277.js";import{u as R}from"./main.0c516264.js";const S=e=>(K("data-v-0f9b41a2"),e=e(),A(),e),Y={class:"bookmarks-content wfull hfull"},G={class:"bookmarks-header bb d-row"},H=S((()=>f("li",{class:"pl30 f16 ac d-col-8"},"书签管理",-1))),Q={class:"d-col-8",span:8},W={class:"d-col-8",span:8},X=S((()=>f("div",{class:"d-inline f12 ml20 mr10"},"导入到",-1))),Z={class:"f12"},ee={class:"d-layout hfull"},le={class:"d-layout-aside d-auto-y",style:{height:"calc(100% - 40px)",width:"160px"}},ae=["onClick"],oe={key:0,class:"ac mt50"},se=[q(" 书签管理只能在扩展模式下使用 "),S((()=>f("p",{class:"mt10"},[q(" 进入官网选择适合自己浏览器的版本下载 "),f("a",{href:"https://itab.link",class:"book-item-a",target:"_blank"},"https://itab.link")],-1)))],te={class:"body-item d-flex-y"},ie=["src"],ne={key:0,class:"d-cell d-flex"},re=["href"],ce={class:"d-elip"},de={class:"bookmarks-handle",style:{"min-width":"52px"}},ue={name:"appBookmarks"};var me=J(Object.assign(ue,{setup(e){const K=R(),A=L(),q=["#fff","#1890ff","#2ecc71","#33c5c5","#9b59b6","#f1c40f","#e67e22","#e74c3c"],J=r({activeIndex:0,keyword:"",isBetchImport:!1,booksData:[],booksChildren:[]}),S=c(),ue=d((()=>!(chrome&&chrome.bookmarks)));let me=d({get:()=>K.menuActiveId||"",set(e){K.menuActiveId=e}});const pe=d((()=>A.value.find((e=>e.id==K.menuActiveId))));let be=[];function he(e){e?(J.activeIndex=-1,chrome.bookmarks.search(e,(l=>{console.log(e),J.booksChildren=l||[]}))):(J.activeIndex=0,J.booksChildren=J.booksData[0].children||[])}function fe(e){e.edit?chrome.bookmarks.update(e.id,{title:e.title,url:e.url},(l=>{e.edit=!1})):e.edit=!0}function ke(e,n){let r=(c=((e,l)=>{for(var a in l||(l={}))s.call(l,a)&&i(e,a,l[a]);if(o)for(var a of o(l))t.call(l,a)&&i(e,a,l[a]);return e})({},n),l(c,a({children:[]})));var c;e.forEach(((e,l)=>{e.url?r.children.push(e):e.children&&ke(e.children,e)})),r.children.length&&be.push(r)}return chrome&&chrome.bookmarks&&chrome.bookmarks.getTree((e=>{ke(e,{}),J.booksData=be,J.booksData[0]&&(J.booksChildren=J.booksData[0].children||[])})),(e,l)=>{const a=E,o=M,s=F,t=T,i=u,r=$,c=n,d=m("lh");return p(),b(c,{height:"600px",destroyOnClose:!0},{default:h((()=>[f("div",Y,[k((p(),y("ul",G,[H,f("li",Q,[v(a,{style:{width:"200px"},placeholder:"搜索",onInput:he,size:"mini",modelValue:g(J).keyword,"onUpdate:modelValue":l[0]||(l[0]=e=>g(J).keyword=e)},null,8,["modelValue"])]),f("li",W,[X,v(s,{modelValue:g(me),"onUpdate:modelValue":l[1]||(l[1]=e=>V(me)?me.value=e:me=e),style:{width:"100px"},size:"mini",placeholder:"group"},{default:h((()=>[(p(!0),y(x,null,C(g(A),(e=>(p(),b(o,{key:e.id,label:e.name,value:e.id},{default:h((()=>[f("span",Z,w(e.name),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])])),[[d,40]]),f("div",ee,[f("ul",le,[(p(!0),y(x,null,C(g(J).booksData,((e,l)=>(p(),y("li",{onClick:a=>function(e,l){J.activeIndex=l,J.booksChildren=e.children||[]}(e,l),class:j([{active:g(J).activeIndex==l},"d-left-tabs-item"]),key:l},w(e.title),11,ae)))),128))]),v(U,{ref_key:"refBody",ref:S,name:"flip-list",tag:"ul",style:{height:"calc(100% - 40px)"},class:"d-layout-content bookmarks-body"},{default:h((()=>[g(ue)?(p(),y("div",oe,se)):_("",!0),(p(!0),y(x,null,C(g(J).booksChildren,((e,l)=>(p(),b(r,{class:"body-card","body-style":{padding:"16px"},key:e.id},{default:h((()=>[f("div",te,[f("img",{src:`chrome://favicon/size/32@2x/${e.url}`,class:"mr20"},null,8,ie),e.edit?(p(),y("p",ne,[v(a,{class:"d-cell",onKeyup:I((l=>fe(e)),["enter"]),size:"mini",placeholder:"标题",modelValue:e.title,"onUpdate:modelValue":l=>e.title=l},null,8,["onKeyup","modelValue","onUpdate:modelValue"]),v(a,{placeholder:"url",class:"d-cell ml5",onKeyup:I((l=>fe(e)),["enter"]),size:"mini",modelValue:e.url,"onUpdate:modelValue":l=>e.url=l},null,8,["onKeyup","modelValue","onUpdate:modelValue"])])):(p(),y("a",{key:1,href:e.url,target:"_blank",class:"d-flex-y d-hidden d-cell"},[f("span",ce,w(e.title),1)],8,re)),f("p",de,[v(t,{type:"warning",onClick:l=>function(e){let l={backgroundColor:q[Math.floor(8*Math.random())],iconText:e.title.trim().substring(0,4),id:N(),name:e.title,src:"",type:"text",url:e.url};pe.value.children.push(l),B.success(`添加【${l.name}】成功`)}(e),size:"mini",icon:g(O)},null,8,["onClick","icon"]),v(t,{onClick:l=>fe(e),size:"mini",type:"primary",icon:e.edit?g(z):g(D)},null,8,["onClick","icon"]),v(i,{onConfirm:a=>function(e,l){chrome.bookmarks.remove(e.id,(()=>{J.booksChildren.splice(l,1)}))}(e,l),title:"确认删除?"},{reference:h((()=>[v(t,{size:"mini",type:"danger",icon:g(P)},null,8,["icon"])])),_:2},1032,["onConfirm"])])])])),_:2},1024)))),128))])),_:1},512)])])])),_:1})}}}),[["__scopeId","data-v-0f9b41a2"]]);export{me as default};
