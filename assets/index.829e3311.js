import{_ as e}from"./d-dialog.742c36de.js";import{f as o,r as t,w as a,c as l,br as s,bc as d,bu as n,bv as u,o as i,a as c,j as r,k as p,u as m,b as f,ba as v,F as b,q as h,d as V,ak as x,g,n as y,h as _,V as k,x as L,bx as j,ad as w,P as Y,l as C,v as U,m as M,L as z,M as D,E as O,R as T,I}from"./vendor.d7d62f29.js";import"./el-main.4cc208df.js";import{_ as R}from"./d-color.86fd4f36.js";import"./el-date-picker.a2ce8a8e.js";import{_ as q,q as E,S as K}from"./d-text-icon.995c3277.js";import"./main.0c516264.js";const A=e=>(z("data-v-45a218b2"),e=e(),D(),e),F={class:"todo-wrap d-layout"},P=A((()=>V("p",{class:"d-left-tabs-item"},"所有待办",-1))),S={key:0,class:"mt10 f12 pl20"},$=["onClick"],B={class:"d-cell d-hidden d-main"},G={style:{width:"46px",height:"34px"}},H={class:"todo-add"},J=["onKeyup"],N=A((()=>V("span",{class:"toto-add-line"},null,-1))),Q=[A((()=>V("source",{src:"./audio/complete.wav"},null,-1)))];var W=q({setup(e){const z=E(),D=o({inputValue:"",todoList:[],sortTodo:[]});function q(e){let o=k(`${e} 23:59:59`).valueOf();return!!e&&k().valueOf()>o}const A=t(null);D.todoList=z.value;a((()=>D.todoList),(e=>{e=e||[],D.sortTodo=e.sort(((e,o)=>e.done-o.done))}),{deep:!0,immediate:!0});const W=()=>{if(!D.inputValue)return;let e={content:D.inputValue,expire:k().format("YYYY-MM-DD"),color:"",done:!1,ct:k().valueOf()};D.todoList.unshift(e),D.inputValue="",X()};function X(){z.value=D.todoList,K("todo")}const Z=l((()=>100*(D.todoList||[]).filter((e=>e.done)).length/D.todoList.length+"%"));return(e,o)=>{const t=s,a=O,l=T,k=d,z=R,E=I,K=n,ee=u;return i(),c("div",F,[r(ee,{class:"d-layout hfull"},{default:p((()=>[r(t,{class:"d-left-tabs pt30",style:{"background-color":"var(--bg-info)",width:"160px"}},{default:p((()=>[P])),_:1}),r(K,{class:"todo-content pr10 hfull"},{default:p((()=>[m(D).todoList.length?f("",!0):(i(),c("div",S,"赶快添加您的第一条待办吧")),r(v,{tag:"ul",name:"list-complete",class:"todo-content-ul d-sub"},{default:p((()=>[(i(!0),c(b,null,h(m(D).sortTodo,((e,o)=>(i(),c("li",{class:"todo-content-li",key:e},[V("button",{class:g(["todo-check",{done:e.done}]),style:y({borderColor:e.color}),onClick:_((o=>(e=>{e.done=!e.done,e.done&&(A.value.load(),A.value.play()),X()})(e)),["prevent"])},[r(a,{class:"todo-icon-check"},{default:p((()=>[r(m(x))])),_:1})],14,$),V("div",B,[r(l,{autosize:{minRows:1,maxRows:10},type:"textarea",size:"mini",onInput:X,class:g(["todo-text",{done:e.done}]),modelValue:e.content,"onUpdate:modelValue":o=>e.content=o},null,8,["class","modelValue","onUpdate:modelValue"]),r(k,{onChange:o=>e.focus=!1,clearable:!1,class:g(["item-expire",{isExpire:q(e.expire)}]),"value-format":"YYYY-MM-DD",size:"mini",modelValue:e.expire,"onUpdate:modelValue":o=>e.expire=o,type:"date",placeholder:"-"},null,8,["onChange","class","modelValue","onUpdate:modelValue"])]),V("div",G,[e.done?f("",!0):(i(),L(E,{key:0,placement:"bottom-end",width:200,trigger:"hover"},{reference:p((()=>[r(a,null,{default:p((()=>[r(m(j))])),_:1})])),default:p((()=>[V("div",null,[r(z,{title:"优先级",custom:!1,modelValue:e.color,"onUpdate:modelValue":o=>e.color=o,colors:["#e03131","#ffb000","#4772fa","var(--d-sub)"]},null,8,["modelValue","onUpdate:modelValue","colors"])])])),_:2},1024)),r(a,{class:"ml10 mr10",title:"删除",onClick:e=>(e=>{D.todoList.splice(e,1),X()})(o)},{default:p((()=>[r(m(w))])),_:2},1032,["onClick"])])])))),128))])),_:1}),V("div",H,[r(a,{size:"16",class:"todo-add-icon d-sub"},{default:p((()=>[r(m(Y))])),_:1}),C(V("input",{autofocus:"autofocus",class:"todo-add-input bb",type:"text",onKeyup:M(W,["enter"]),placeholder:"添加任务","onUpdate:modelValue":o[0]||(o[0]=e=>m(D).inputValue=e)},null,40,J),[[U,m(D).inputValue,void 0,{trim:!0}]]),N])])),_:1})])),_:1}),V("div",{class:"todo-progress",style:y({width:m(Z)})},[V("audio",{class:"d-hidden",ref_key:"refAudio",ref:A},Q,512)],4)])}}},[["__scopeId","data-v-45a218b2"]]);const X={name:"appTodo"},Z=Object.assign(X,{setup:o=>(o,t)=>{const a=e;return i(),L(a,{height:"600px"},{default:p((()=>[r(W)])),_:1})}});export{Z as default};
