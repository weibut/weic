import{_ as a}from"./d-dialog.742c36de.js";import{v as e,w as t,c as s,x as l,y as n,z as i}from"./main.0c516264.js";import{f as c,br as o,bs as d,bt as u,bu as f,bv as r,l as p,u as m,o as v,a as y,d as k,j as b,k as h,bw as _,F as g,q as D,x,t as w,Z as N,g as C,n as S,ad as T,h as j,z as I,e as O,b as V,E as $,aE as E,aF as K,bl as z,bm as L,b8 as G}from"./vendor.d7d62f29.js";import"./el-main.4cc208df.js";import"./el-tab-pane.b7419647.js";import{_ as M,n as A,z as F}from"./d-text-icon.995c3277.js";const P={class:"stock-wrap"},R={class:"stock-handle d-absolute hover d-sub"},U={class:"stock-search"},q={class:"d-flex f12",style:{width:"200px"}},H={class:"d-elip",style:{width:"30%"}},Z={class:"d-elip",style:{width:"50%"}},B={class:"d-elip",style:{width:"20%"}},J=["onClick"],Q={class:"title fl",style:{width:"44%"}},W={class:"d-elip"},X={class:"f12 d-main"},Y={class:"fl",style:{width:"30%"}},aa={class:"fl",style:{width:"26%"}},ea=["onClick"],ta={class:"mb10 d-flex"},sa={class:"d-main"},la={class:"b f20 mt5"},na={class:"f12"},ia={class:"content-header d-flex pt10",style:{"padding-right":"120px"}},ca={class:"d-cell b f28 d-elip"},oa={class:"f16"},da={class:"f16"},ua={class:"b"},fa={class:"b"};var ra=M({setup(a){const M=A(),ra=[{label:"分时",value:"trends"},{label:"日K",value:"101"},{label:"周K",value:"102"},{label:"月K",value:"103"},{label:"季K",value:"104"},{label:"年K",value:"105"}],pa=c({keyword:"",activeName:"trends",activeData:{},stockOption:[],selfStockData:[],subOptions:[],stockInfo:[],stockGrails:[],loading:!1});function ma(a){return 0==a?"gray":a>0?"#e5353d":"#41c662"}function va(a){var e,t,s,l;M.value=(e=M.value,t=a.newIndex,s=a.oldIndex,l=e[s],e[s]=e[t],e[t]=l,e)}function ya(a){a&&l(a).then((a=>{pa.subOptions=a.Data||[]}))}function ka(a){if(M.value.some((e=>e.Code==a.Code)))return;let e={Code:a.Code,MktNum:a.MktNum,SecurityTypeName:a.SecurityTypeName,SecurityType:a.SecurityType};M.value.push(e),Da()}function ba(a){"trends"==pa.activeName?xa():function(){const a={secid:`${pa.activeData.f13}.${pa.activeData.f12}`,klt:pa.activeName};i(a).then((a=>{pa.stockOption=a.data.klines||[]}))}()}let ha={1:"sh",2:"sz",19:"rt_hk",20:"gb_"};const _a=[{n:"最高",i:4},{n:"今开",i:1},{n:"成交量",i:8,unit:"手"},{n:"最低",i:5},{n:"昨收",i:2},{n:"成交额",i:9}];function ga(){let a=M.value.find((a=>a.Code==pa.activeData.f12));pa.activeData.SecurityTypeName=a.SecurityTypeName;let e=`${ha[a.SecurityType]}${a.Code.toLowerCase()}`;pa.stockInfo=[],n(e).then((a=>{let e=a.match(/stock="(\S*)";/);e&&(pa.stockInfo=e[1].split(","))}))}function Da(){if(!M.value.length)return;pa.loading=!0;let a=M.value.map((a=>`${a.MktNum}.${a.Code}`));e(a.join(",")).then((a=>{pa.selfStockData=a.data.diff||[],F(pa.activeData)&&(pa.activeData=pa.selfStockData[0]),pa.activeName="trends",xa(),ga()})).finally((()=>{setTimeout((()=>{pa.loading=!1}),200)}));e(["1.000001","0.399001","0.399006","1.000688","100.HSI"].join(",")).then((a=>{pa.stockGrails=a.data.diff||[]}))}function xa(){const a={secid:`${pa.activeData.f13}.${pa.activeData.f12}`};t(a).then((a=>{pa.stockOption=a.data.trends||[]}))}return Da(),(a,e)=>{const t=$,l=E,n=K,i=o,c=d,A=u,F=z,ha=L,wa=f,Na=r,Ca=G;return p((v(),y("div",P,[k("div",R,[b(t,{size:16,title:"刷新",onClick:Da},{default:h((()=>[b(m(_))])),_:1})]),b(Na,{class:"d-layout hfull"},{default:h((()=>[b(i,{class:"d-left-tabs pt30",style:{"background-color":"var(--bg-info)",width:"220px"}},{default:h((()=>[k("div",U,[b(n,{class:"wfull",modelValue:m(pa).keyword,"onUpdate:modelValue":e[0]||(e[0]=a=>m(pa).keyword=a),size:"mini",filterable:"",remote:"","reserve-keyword":"","value-key":"Code",placeholder:"输入股票名称、代码","remote-method":ya,onChange:ka},{default:h((()=>[(v(!0),y(g,null,D(m(pa).subOptions,(a=>(v(),x(l,{key:a.ID,value:a},{default:h((()=>[k("li",q,[k("span",H,w(a.Code),1),k("span",Z,w(a.Name),1),k("span",B,w(a.SecurityTypeName),1)])])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])]),b(m(N),{class:"self-content d-scrollbar-hide",animation:200,list:m(pa).selfStockData,itemKey:"f12",onEnd:va},{item:h((({element:a,index:e})=>[(v(),y("p",{class:C(["self-content-li d-hidden",[ma(a.f3),{active:m(pa).activeData==a}]]),key:a.f12,onClick:e=>{return t=a,pa.activeData=t,pa.activeName="trends",xa(),void ga();var t},style:S({color:ma(a.f3)})},[k("span",Q,[k("p",W,w(a.f14),1),k("code",X,w(a.f12),1)]),k("span",Y,w(a.f2),1),k("span",aa,w(a.f3)+"%",1),k("span",{class:"stock-del d-flex-center",onClick:j((a=>function(a,e){M.value.splice(e,1),Da()}(0,e)),["stop"])},[b(t,null,{default:h((()=>[b(m(T))])),_:1})],8,ea)],14,J))])),_:1},8,["list"])])),_:1}),b(wa,{class:"todo-content pr10 hfull",style:{"padding-top":"10px"}},{default:h((()=>[k("ul",ta,[(v(!0),y(g,null,D(m(pa).stockGrails,(a=>(v(),y("li",{style:S({color:ma(a.f3)}),class:"mr20",key:a.f1},[k("span",sa,w(a.f14),1),k("p",la,w(a.f2),1),k("p",na,w(a.f4)+"("+w(a.f3)+"%)",1)],4)))),128))]),k("div",ia,[k("span",ca,[k("b",null,w(m(pa).activeData.f14),1),k("small",oa,w(m(pa).activeData.f12),1),k("small",da,w(m(pa).activeData.SecurityTypeName),1)]),k("p",ua,[k("span",null,w(m(pa).activeData.f2),1),k("span",{style:S([{background:"gray","border-radius":"3px",padding:"0 4px","line-height":"18px",color:"#fff"},{backgroundColor:ma(m(pa).activeData.f3)}]),class:"ml10 f12 d-inline"},w(m(pa).activeData.f3),5)])]),b(A,{class:"mt10 bt",style:{"line-height":"26px"}},{default:h((()=>[(v(),y(g,null,D(_a,(a=>b(c,{span:8,key:a},{default:h((()=>[k("span",null,w(a.n)+"：",1),k("span",fa,w(m(pa).stockInfo[a.i]||"-")+" "+w(a.unit),1)])),_:2},1024))),64))])),_:1}),b(ha,{class:"stock-title bb bt",modelValue:m(pa).activeName,"onUpdate:modelValue":e[1]||(e[1]=a=>m(pa).activeName=a),onTabClick:ba},{default:h((()=>[(v(),y(g,null,D(ra,(a=>b(F,{key:a.value,name:a.value,label:a.label},null,8,["name","label"]))),64))])),_:1},8,["modelValue"]),"trends"==m(pa).activeName?(v(),x(I(O((()=>s((()=>import("./Trends.d743cdce.js")),["assets/Trends.d743cdce.js","assets/install.60f361c4.js","assets/vendor.d7d62f29.js"])))),{key:0,data:m(pa).stockOption,style:{width:"100%",height:"360px"}},null,8,["data"])):V("",!0),"trends"!=m(pa).activeName?(v(),x(I(O((()=>s((()=>import("./KLine.cc18be40.js")),["assets/KLine.cc18be40.js","assets/install.60f361c4.js","assets/vendor.d7d62f29.js"])))),{key:1,data:m(pa).stockOption,style:{width:"100%",height:"360px"}},null,8,["data"])):V("",!0)])),_:1})])),_:1})])),[[Ca,m(pa).loading]])}}},[["__scopeId","data-v-274e80b3"]]);const pa={name:"appStock"},ma=Object.assign(pa,{setup:e=>(e,t)=>{const s=a;return v(),x(s,{height:"600px"},{default:h((()=>[b(ra)])),_:1})}});export{ma as default};
