import{u as e,o as a,$ as n,a as t,i as o,d as l,_ as s}from"./main.0c516264.js";import{u as i,a as p,S as r,l as u}from"./d-text-icon.995c3277.js";import{r as c,B as d,f as m,ag as f,H as g,o as k,x as w,u as y}from"./vendor.d7d62f29.js";const x={setup(x){const h=i(),v=e(),b=c(null),{t:D}=d(),W=m({contextmenuData:[{name:D("addIcon"),key:"add",icon:"plus"},{name:D("changeWallpaper"),key:"switchWallpaper",icon:"switch"},{name:D("downWallpaper"),key:"download",icon:"download",group:!0},{name:D("setting"),key:"setting",icon:"setting"},{name:"立即备份",key:"backups",icon:"cloudy"}]});function C(e){e.preventDefault(),e.stopPropagation(),b.value.open(e)}function j(e){if("add"==e.key)v.setDialogIcon();else if("switchWallpaper"==e.key)p.randomWallpaper({t:(new Date).getTime()}).then((e=>{let a=e.data||"";h.value.wallpaper.src=a,h.value.wallpaper.thumb="",h.value.wallpaper.type=1,o(a).then((e=>{v.wallpaperBlob=e})),r("baseConfig")}));else if("download"==e.key){let e=h.value.wallpaper;if(!e.src)return;l(e.src,e.name)}else if("setting"==e.key)v.setSettingHandle(2);else if("backups"==e.key){if(!u.get("token"))return void v.setLoginInfo("login");r(null,100)}}return f((()=>{a(n("#app-main"),"contextmenu",C)})),g((()=>{t(n("#app-main"),"contextmenu",C)})),(e,a)=>{const n=s;return k(),w(n,{name:"homeContextmenu",data:y(W).contextmenuData,onClick:j,ref_key:"refContextmenu",ref:b},null,8,["data"])}}};export{x as default};
